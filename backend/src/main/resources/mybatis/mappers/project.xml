<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="project">	
		<select id="findByCrew" parameterType="long" resultType="projectvo">
				<![CDATA[
				select a.no as id, a.project_name as projectName, a.start_date as start, a.end_date as end, a.descrition as description, a.status, b.name as crewName
				from project a, crew b
				where crew_no= #{crewNo}  and enable=1
				and a.crew_no = b.no;
				]]>
		</select>
		<select id="findByChannel" parameterType="long" resultType="projectvo">
				<![CDATA[
				select a.no as id, a.project_name as projectName, a.start_date as start, a.end_date as end, a.descrition as description, a.status, c.name as crewName
				from project a, channel b, crew c
				where b.no= #{channelNo} and a.enable=1 and a.crew_no = c.no and b.no = c.channel_no;
				]]>
		</select>
		<insert id="insert" parameterType="projectvo">
				<![CDATA[
				insert into project value(null, #{projectName}, #{start}, #{end}, #{description},0,1, #{crewNo});
				]]>
		</insert>
		
		<update id="update" parameterType="projectvo">
				<![CDATA[
				update project set project_name=#{projectName}, start_date=#{start}, end_date=#{end}, descrition=#{description},crew_no=#{crewNo} where no=#{id}; 
				]]>
		</update>
		
		<delete id="delete" parameterType="long">
				<![CDATA[
				update project set enable=0 where no=#{id}; 
				]]>
		</delete>

</mapper>
