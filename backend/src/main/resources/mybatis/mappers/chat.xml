<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="chat">	
		<select id="findAllByCrewNo" parameterType="long" resultType="chatvo">
				<![CDATA[
				select a.no, a.crew_no as crewNo, a.user_no as userNo, a.send_date as sendDate, a.message, a.type, b.name as userName
				from chat as a, user as b
				where a.crew_no = #{crewNo} and a.user_no = b.no;
				]]>
		</select>
		
		<insert id="insertByCrewNoAndUserNo" parameterType="chatvo">
				<![CDATA[
				insert
					into chat 
				values(null, #{crewNo }, #{userNo }, now(), #{message }, #{type })
				]]>
		</insert>
</mapper>
